{{define "login"}}

<div class="container mt-5 text-white col-8">
  <h2 class="mb-4">Login</h2>

  {{if .mensaje}}
  <div class="alert alert-success alert-dismissible" role="alert">
    <div id="mensaje">{{.mensaje}}</div>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
  {{end}}

  <form method="POST" action="/login" id="login-form" class=" ">
    <div class="form-floating mb-3">
      <input
        type="text"
        class="form-control"
        id="nombre"
        name="nombre"
        placeholder=""
        required
        value="{{.nombre}}"
      />
      <label for="nombre" class="form-label">Nombre</label>
    </div>
    <div class="form-floating mb-3">
      <input
        type="text"
        class="form-control"
        id="apellido"
        name="apellido"
        placeholder=""
        required
        value="{{.apellido}}"
      />
      <label for="apellido" class="form-label">Apellido</label>
    </div>
    <div class="form-floating mb-3">
      <input
        type="phone"
        class="form-control"
        id="telefono"
        name="telefono"
        placeholder=""
        required
        value="{{.telefono}}"
      />
      <label for="telefono" class="form-label">Telefono</label>
    </div>
    <div class="form-floating mb-3">
      <input
        type="email"
        class="form-control"
        id="email"
        name="email"
        placeholder=""
        required
        value="{{.email}}"
      />
      <label for="email" class="form-label">Correo</label>
    </div>
    <button type="submit" id="button-form" class="btn btn-primary">
      Enviar
    </button>
  </form>
</div>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("login-form");
    const success = document.getElementById("mensaje");

    form.addEventListener("submit", (e) => {
      const nombre = document.getElementById("nombre").value;
      if (nombre.length < 3) {
        e.preventDefault();
        alert("El nombre debe tener al menos 3 caracteres.");
      }
    });
    if (success) {
      setTimeout(function () {
        window.location.href = "/inicio"; // Ruta a donde querÃ©s redirigir
      }, 1500); // 2000 milisegundos = 2 segundos
    }
  });
</script>
{{end}}
